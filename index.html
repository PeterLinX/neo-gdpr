<!DOCTYPE html>
<html>
<head>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script>

		function stubIPFSResult(hash){
			//fake IPFS result
			return ["6E344B22D8AC8AF93CF294C411B1356F0484B9214C5A44E6FC053B9E44205B8B",
			"1B6B4BB037F5FA377D135624A925CCAF990E39C63E0F4006801F5FDEDF33F21E",
			"6AD54F56589E4AADBC27EAFECDA98D82F52BCE3A7ED0A0BD4D0D7AB1A3C6481B"]
		}
		function hex2a(hexx) {
			var hex = hexx.toString();
			var str = '';
			for (var i = 0; (i < hex.length && hex.substr(i, 2) !== '00'); i += 2)
				str += String.fromCharCode(parseInt(hex.substr(i, 2), 16));
			return str;
		}
		req=JSON.stringify({
			"jsonrpc": "2.0",
			"method": "invokefunction",
			"params": [
			"0x2cd1380a87107b8bc3731871f7ea3318a167d06d",
			"list",
			[{
				"type": "String",
				"value": "newsletter_1"
			}
			]],
			"id": 1})

		$(document).ready(function(){
			$.post( "http://localhost:30333", req)
			.done(function( data ) {
				hash = hex2a(data.result.stack[4].value);
				email_hashes = stubIPFSResult(hash);

				$.each(email_hashes, function(i, item) {
					var $tr = $('<tr>').append($('<td>').text(item)).appendTo('#records_table');
				});
			});
		});
</script>
</head>
<body>
	<table id="records_table" border="1">
		<tr><th>Encrypted Email Hash</th></tr>
	</table>
</body>
</html>
